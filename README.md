# go-mq

åŸºäº DDD (Domain-Driven Design) æ¶æ„çš„ Go æ¶ˆæ¯é˜Ÿåˆ—é¡¹ç›®ã€‚

## é¡¹ç›®ç®€ä»‹

go-mq æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„æ¶ˆæ¯é˜Ÿåˆ—é¡¹ç›®ï¼Œä¸»è¦ç”¨äºåŒ»ç–—å¥åº·é¢†åŸŸçš„æ•°æ®å¤„ç†å’Œç»Ÿè®¡ã€‚é¡¹ç›®é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ¶æ„ï¼Œå®ç°äº†å¥åº·è®°å½•çš„ç”Ÿäº§å’Œç»Ÿè®¡æ•°æ®çš„æ¶ˆè´¹åŠŸèƒ½ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸ¥ å¥åº·è®°å½•ç®¡ç†
- ğŸ“Š åŒ»ç–—æ•°æ®ç»Ÿè®¡
- ğŸ”„ æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†
- ğŸ“ˆ å®æ—¶æ•°æ®æ›´æ–°
- ğŸ”’ æ•°æ®å®‰å…¨æ€§ä¿éšœ

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- Go 1.22+
- go-zero v1.6.0 (å¾®æœåŠ¡æ¡†æ¶)
- JWT è®¤è¯
- Redis ç¼“å­˜

### æ•°æ®åº“
- MySQL (æ•°æ®æŒä¹…åŒ–)
- Redis (ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—)

### CI/CD
- GitHub Actions

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â””â”€â”€ main.go            # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ domain/                # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ health/           # å¥åº·è®°å½•é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ health.go     # å¥åº·è®°å½•æ¨¡å‹
â”‚   â”‚   â””â”€â”€ repository.go # å¥åº·è®°å½•ä»“å‚¨æ¥å£
â”‚   â”œâ”€â”€ statistics/       # ç»Ÿè®¡é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ statistics.go # ç»Ÿè®¡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ repository.go # ç»Ÿè®¡ä»“å‚¨æ¥å£
â”‚   â””â”€â”€ vars.go           # é¢†åŸŸå˜é‡
â”œâ”€â”€ application/          # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ dto/             # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ service/         # åº”ç”¨æœåŠ¡
â”‚   â””â”€â”€ usecase/         # ç”¨ä¾‹å®ç°
â”œâ”€â”€ infrastructure/       # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ persistence/     # æŒä¹…åŒ–å®ç°
â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ intergration/   # é›†æˆæœåŠ¡
â”‚   â”œâ”€â”€ provider/       # æä¾›è€…
â”‚   â”œâ”€â”€ sql/           # æ•°æ®è¡¨DDL
â”‚   â”œâ”€â”€ startup/        # æœåŠ¡å¯åŠ¨åˆå§‹åŒ–
â”‚   â””â”€â”€ svc/            # æœåŠ¡ä¸Šä¸‹æ–‡
â”œâ”€â”€ interfaces/          # æ¥å£å±‚
â”‚   â”œâ”€â”€ api/            # API æ¥å£
â”‚   â”‚   â””â”€â”€ handler/    # HTTP å¤„ç†å™¨
â”‚   â””â”€â”€ middleware/     # ä¸­é—´ä»¶
â”œâ”€â”€ common/             # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ errors/        # é”™è¯¯å®šä¹‰
â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ constants/     # å¸¸é‡å®šä¹‰
â”œâ”€â”€ etc/               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ pkg/               # å¯é‡ç”¨çš„åŒ…
â”œâ”€â”€ scripts/           # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ test/              # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ vendor/            # ä¾èµ–åŒ…
â”œâ”€â”€ go.mod             # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum             # Go ä¾èµ–ç‰ˆæœ¬é”å®š
â”œâ”€â”€ Makefile           # æ„å»ºè„šæœ¬
â”œâ”€â”€ Dockerfile         # Docker æ„å»ºæ–‡ä»¶
â””â”€â”€ docker-compose.yml # Docker ç¼–æ’æ–‡ä»¶
```

## åŠŸèƒ½ç‰¹æ€§

### å¥åº·è®°å½•ç®¡ç†
- å¥åº·è®°å½•åˆ›å»º
- å¥åº·è®°å½•æ›´æ–°
- å¥åº·è®°å½•åˆ é™¤
- å¥åº·è®°å½•æŸ¥è¯¢

### åŒ»ç–—æ•°æ®ç»Ÿè®¡
- æ‚£è€…æ€»æ•°ç»Ÿè®¡
- æ´»è·ƒæ‚£è€…ç»Ÿè®¡
- é¢„çº¦æ•°æ®ç»Ÿè®¡
- å¥åº·è®°å½•ç»Ÿè®¡
- æ“ä½œè®°å½•ç»Ÿè®¡

### æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†
- å¥åº·è®°å½•ç”Ÿäº§
- ç»Ÿè®¡æ•°æ®æ¶ˆè´¹
- å®æ—¶æ•°æ®æ›´æ–°
- æ•°æ®ä¸€è‡´æ€§ä¿è¯

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
go get github.com/your-username/go-mq
```

### é…ç½®

```yaml
# etc/config.yaml
server:
  port: 8888
  host: 0.0.0.0

database:
  host: localhost
  port: 3306
  username: root
  password: root
  dbname: go_mq

redis:
  host: localhost
  port: 6379
  password: ""
  db: 0
```

### ä½¿ç”¨ç¤ºä¾‹

#### åˆ›å»ºå¥åº·è®°å½•

```bash
curl -X POST http://localhost:8888/v1/health/save \
  -H "Content-Type: application/json" \
  -d '{
    "patient_id": 1,
    "patient_name": "å¼ ä¸‰",
    "date": "2024-04-23",
    "record_type": "é—¨è¯Š",
    "diagnosis": "æ„Ÿå†’",
    "treatment": "ä¼‘æ¯",
    "notes": "å¤šå–æ°´",
    "vital_signs": "æ­£å¸¸",
    "medications": "æ„Ÿå†’è¯",
    "attachments": ""
  }'
```

å“åº”ç¤ºä¾‹ï¼š
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": 1
  }
}
```

#### è·å–å¥åº·è®°å½•åˆ—è¡¨

```bash
curl -X GET "http://localhost:8888/v1/health/list?page=1&page_size=10"
```

å“åº”ç¤ºä¾‹ï¼š
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "patient_id": 1,
        "patient_name": "å¼ ä¸‰",
        "date": "2024-04-23",
        "record_type": "é—¨è¯Š",
        "diagnosis": "æ„Ÿå†’",
        "treatment": "ä¼‘æ¯",
        "notes": "å¤šå–æ°´",
        "vital_signs": "æ­£å¸¸",
        "medications": "æ„Ÿå†’è¯",
        "attachments": "",
        "user_id": "user123",
        "created_at": "2024-04-23 10:00:00",
        "updated_at": "2024-04-23 10:00:00"
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 10
  }
}
```

## å¼€å‘æŒ‡å—

1. éµå¾ª DDD åŸåˆ™è¿›è¡Œå¼€å‘
2. ä½¿ç”¨ Go 1.22 æˆ–æ›´é«˜ç‰ˆæœ¬
3. å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
5. éµå¾ªä»£ç è§„èŒƒ

## æ„å»ºå’Œè¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
go mod download

# è¿è¡Œæµ‹è¯•
make test

# æ„å»ºé¡¹ç›®
make build

# è¿è¡ŒæœåŠ¡
make run
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## è®¸å¯è¯

MIT License
